(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["product"],{"0fa5":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",{attrs:{id:"shop"}},[r("b-row",[r("b-col",{staticClass:"mt-5",attrs:{cols:"12"}},[r("h3",{staticClass:"mb-4 text-center"},[t._v(" - 寵物用品 -")])]),t._l(t.products,(function(t){return r("b-col",{key:t._id,attrs:{cols:"12",md:"6",lg:"3"}},[r("router-link",{attrs:{to:"/product/"+t._id}},[r("ProductCard",{attrs:{product:t}})],1)],1)})),r("b-col",{staticClass:"mt-5",attrs:{cols:"12"}}),r("b-col",{staticClass:"mt-5",attrs:{cols:"12"}}),r("b-col",{staticClass:"mt-5",attrs:{cols:"12"}}),r("b-col",{attrs:{cols:"3"}},[r("h3",[t._v("資訊")])]),r("b-col",{attrs:{cols:"5"}},[r("h5",[t._v("地址")]),r("p",[t._v(t._s(t.address))]),r("br"),r("h5",[t._v("聯絡電話")]),r("p",[t._v(t._s(t.phone))])]),r("b-col",{attrs:{cols:"3"}},[r("h5",[t._v("營業時間")]),r("p",[t._v(t._s(t.time))])])],2)],1)},n=[],s=r("1da1"),o=(r("b0c0"),r("99af"),r("d81d"),r("96cf"),r("e915")),c=(r("3eec"),{name:"Shop",data:function(){return{name:"",phone:"",address:"",image:"",time:"",sell:!0,amount:0,products:[]}},computed:{amountstate:function(){return 0===this.amount?null:this.amount>0}},components:{ProductCard:o["a"]},methods:{addcart:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.amountstate){e.next=3;break}return t.$swal({icon:"error",title:"錯誤",text:"請輸入正確數量"}),e.abrupt("return");case 3:if(0!==t.$store.state.jwt.token.length){e.next=6;break}return t.$swal({icon:"error",title:"錯誤",text:"請先登入"}),e.abrupt("return");case 6:return e.prev=6,e.next=9,t.axios.post("/users/cart",{shop:t.$route.params.id,amount:t.amount},{headers:{authorization:"Bearer "+t.$store.state.jwt.token}});case 9:t.$swal({icon:"success",title:"成功",text:"成功購物車"}),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](6),t.$swal({icon:"error",title:"錯誤",text:"加入購物車失敗"});case 15:case"end":return e.stop()}}),e,null,[[6,12]])})))()}},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.axios.get("/shops/"+t.$route.params.id);case 3:return r=e.sent,a=r.data,t.name=a.result.name,t.phone=a.result.phone,t.address=a.result.address,t.time=a.result.time,t.image="".concat("https://pett-back.herokuapp.com","/files/").concat(a.result.image),t.sell=a.result.sell,document.title="".concat(t.name," | 寵物網"),e.next=14,t.axios.get("/products");case 14:n=e.sent,s=n.data,t.products=s.result.map((function(t){return t.image&&(t.image="".concat("https://pett-back.herokuapp.com","/files/").concat(t.image)),t})),e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](0),t.$swal({icon:"error",title:"錯誤",text:"取得商品失敗"});case 22:case"end":return e.stop()}}),e,null,[[0,19]])})))()}}),i=c,u=r("2877"),l=Object(u["a"])(i,a,n,!1,null,null,null);e["default"]=l.exports},d2f1:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",{attrs:{id:"product"}},[r("b-overlay",{attrs:{show:!t.sell},scopedSlots:t._u([{key:"overlay",fn:function(){return[r("h1",[t._v("已下架")])]},proxy:!0}])},[r("b-row",[r("b-col",{attrs:{cols:"12"}},[r("h3",{staticClass:"mt-4 text-center"},[t._v(t._s(t.name))])]),r("br",{staticClass:"m-3"}),r("br",{staticClass:"m-3"}),r("b-col",{staticClass:"mt-3",attrs:{cols:"6"}},[r("img",{staticClass:"w-100",attrs:{src:t.image}})]),r("b-col",{staticClass:"mt-3",attrs:{cols:"6"}},[r("h3",{staticClass:"text-left",attrs:{"text-variant":"danger"}},[t._v("$"+t._s(t.price))]),r("hr"),r("p",[t._v(t._s(t.description))]),r("hr"),r("b-col",{attrs:{cols:"4"}},[t._v("購買數量"),r("b-form-input",{attrs:{type:"number",state:t.amountstate},model:{value:t.amount,callback:function(e){t.amount=t._n(e)},expression:"amount"}}),r("br"),r("b-btn",{attrs:{variant:"outline-primary"},on:{click:t.addcart}},[t._v("加入購物車")])],1)],1)],1)],1)],1)},n=[],s=r("1da1"),o=(r("b0c0"),r("a4d3"),r("e01a"),r("99af"),r("96cf"),{name:"Product",data:function(){return{name:"",price:"",description:"",image:"",sell:!0,amount:0}},computed:{amountstate:function(){return 0===this.amount?null:this.amount>0}},methods:{addcart:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.amountstate){e.next=3;break}return t.$swal({icon:"error",title:"錯誤",text:"請輸入正確數量"}),e.abrupt("return");case 3:if(0!==t.$store.state.jwt.token.length){e.next=6;break}return t.$swal({icon:"error",title:"錯誤",text:"請先登入"}),e.abrupt("return");case 6:return e.prev=6,e.next=9,t.axios.post("/users/cart",{product:t.$route.params.id,amount:t.amount},{headers:{authorization:"Bearer "+t.$store.state.jwt.token}});case 9:t.$swal({icon:"success",title:"成功",text:"成功購物車"}),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](6),t.$swal({icon:"error",title:"錯誤",text:"加入購物車失敗"});case 15:case"end":return e.stop()}}),e,null,[[6,12]])})))()}},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.axios.get("/products/"+t.$route.params.id);case 3:r=e.sent,a=r.data,t.name=a.result.name,t.price=a.result.price,t.description=a.result.description,t.image="".concat("https://pett-back.herokuapp.com","/files/").concat(a.result.image),t.sell=a.result.sell,document.title="".concat(t.name," | 寵物網"),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),t.$router.push("/");case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))()}}),c=o,i=r("2877"),u=Object(i["a"])(c,a,n,!1,null,null,null);e["default"]=u.exports},e01a:function(t,e,r){"use strict";var a=r("23e7"),n=r("83ab"),s=r("da84"),o=r("5135"),c=r("861d"),i=r("9bf2").f,u=r("e893"),l=s.Symbol;if(n&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var p={},m=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof m?new l(t):void 0===t?l():l(t);return""===t&&(p[e]=!0),e};u(m,l);var d=m.prototype=l.prototype;d.constructor=m;var h=d.toString,b="Symbol(test)"==String(l("test")),f=/^Symbol\((.*)\)[^)]+$/;i(d,"description",{configurable:!0,get:function(){var t=c(this)?this.valueOf():this,e=h.call(t);if(o(p,t))return"";var r=b?e.slice(7,-1):e.replace(f,"$1");return""===r?void 0:r}}),a({global:!0,forced:!0},{Symbol:m})}}}]);
//# sourceMappingURL=product.4b69c8ef.js.map